# 4장- IP주소

> 실제로 컴퓨터끼리는 IP주소를 사용해서 데이터를 주고 받는다

## 1. 3계층의 기능

### 3계층에서 하는 일

> 3계층은 다른 네트워크 대역 즉, 멀리 떨어진 곳에 존재하는 네트워크까지 어떻게 데이터를 전달할지 제어하는 일을 담당함

발신에서 착신까지의 패킷 경로를 제어

대표 장비: 라우터(Router)



### 3계층에서 쓰는 주소

IP 주소만으로 통신하는 것이 아니라 서브넷 마스크와 게이트웨이 주소가 필요하다.

물론, 실제로는 IP주소가 아니라 도메인을 통해 통신하며, 해당 도메인이 연결된 IP와 연결해줌

![image](https://user-images.githubusercontent.com/93081720/206995724-f304b015-fd8c-4520-b68b-f0397678a1c4.png)



### 3계층 프로토콜

#### IPv4 프로토콜

일반적으로 IP라고 하면 IPv4를 의미한다.

※ IPv6는 프로토콜 구조도 다르고, 사용하는 체계도 다르다. => 훨씬 길고 복잡함

#### APR 프로토콜

#### ICMP 프로토콜

<br>

## 2. 일반적인 IP 주소

※ IP 주소의 범위

0 ~ 255까지 가능

`0.0.0.0`  ~ `255.255.255.255`

255 = 2^8 - 1로 8비트로 나타낼 수 있는 가장 큰 숫자



### Classful IP 주소

낭비가 심한 주소 체계

클래스별로 나눠서 IP주소를 사용함

각 클래스별로 사용할 수 있는 IP주소가 나눠져 있었음

| 클래스   | 네트워크 구분         | 시작 주소 | 마지막 주소     | 비고                         |
| -------- | --------------------- | --------- | --------------- | ---------------------------- |
| A 클래스 | 0XXXXXXX, 첫번째 필드 | 0.0.0.0   | 127.255.255.255 |                              |
| B 클래스 | 10XXXXXX, 두번째 필드 | 128.0.0.0 | 191.255.255.255 | A클래스 + 1                  |
| C 클래스 | 110XXXXX, 세번째 필드 | 192.0.0.0 | 223.255.255.255 | B클래스 + 1                  |
| D 클래스 | 1110XXXX              | 224.0.0.0 | 239.255.255.255 | C클래스 + 1                  |
| E 클래스 | 1111XXXX              | 240.0.0.  | 255.255.255.255 | D클래스 + 1, 브로드캐스트 콜 |

※ 10진수로 나타낸 체계를 2진수로 바꾼 다음 계산해보면 왜 저런 범위의 숫자가 나오는지 이해 가능

- 왜 낭비가 되는가?

A 클래스는 첫번째 필드로 네트워크 대역을 구분하므로, 예를 들어 100. 0.0.0  ~ 100. 255.255.255일 때, 100은 네트워크 대역을 의미하고, 그 뒤로 오는 0.0.0 ~ 255.255.255는 장비의 개수를 의미함.

이는 2^8*3 = 2^24 = 16,777,216인데, 실제 해당 네트워크 대역에 이정도의 물리적 장비의 수를 구성해서 사용하기는 어려움 => 낭비

<br>

### Classless IP 주소

낭비되지 않도록 아껴 쓰기 위해 탄생한 주소 체계

`00000000.00000000.00000000.00000000`에서 중간에 원하는 값에 지정하여 사용



### 서브넷 마스크

classful한 네트워크 대역을 어디서부터 구분할 것인지 나눠주는데 사용하는 값

어디까지가 네트워크 대역을 구분하는 데 사용하고, 어디서부터 호스트를 구분하는데 사용하는지 지정

2진수로 표기했을 때 1로 시작하고, 1과 1 사이에는 0이 올 수 없으며 0이 온 뒤부터는 계속 0이 온다.

=> 0이 나오는 그 순간부터가 해당 네트워크에 포함된 물리적 장비의 수를 의미함

예) `11111111.11111111.11111111.11000000` => C클래스 네트워크 대역을 가지며, 0이 6개이므로, 2^6개의 물리적 장비가 연결될 수 있다.



### 사설 IP와 공인 IP

![image](https://user-images.githubusercontent.com/93081720/207004133-ce5001e3-96dd-4815-8ae7-e555ebdc468e.png)

#### 공인 IP

실제 네트워크 통신망과 통신할 때 사용하는 IP 주소

실제 인터넷 상에서는 공인 IP로만 통신하기 때문에 외부 네트워크 대역에서는 사설 IP 대역이 보이지 않는다.

#### 사설 IP

같은 네트워크 대역에서 사용하는 IP 주소

내부에서는 사설 IP를 가지고 통신하다가, 외부와 통신할 때는 공인 IP로 변경하여 통신하게 됨

#### NAT

Network Address Translation

특정 IP를 다른 IP로 바꾸는 기술

<br>

## 3. 특수한 IP 주소

### 0.0.0.0

> Wildcard

'나머지' 모든 IP

### 127.x.x.x

> 나 자신을 나타내는 주소

127로 시작하는 IP는 자기 자신을 나타내는 주소임

### 게이트웨이 주소

> 공유기의 IP

일반적으로 해당 네트워크 대역에서 쓸 수 있는 가장 작은 IP나, 가장 높은 IP를 설정해서 사용함

예) `192.168.0.1`나 `192.168.255.255`